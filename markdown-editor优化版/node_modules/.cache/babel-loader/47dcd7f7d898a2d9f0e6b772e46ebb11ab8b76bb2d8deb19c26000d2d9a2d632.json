{"ast":null,"code":"import \"core-js/modules/es.array.concat.js\";\nimport \"core-js/modules/es.array.every.js\";\nimport \"core-js/modules/es.array.includes.js\";\nimport \"core-js/modules/es.array.join.js\";\nimport \"core-js/modules/es.array.map.js\";\nimport \"core-js/modules/es.array.slice.js\";\nimport \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.every.js\";\nimport \"core-js/modules/es.iterator.map.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.regexp.constructor.js\";\nimport \"core-js/modules/es.regexp.dot-all.js\";\nimport \"core-js/modules/es.regexp.exec.js\";\nimport \"core-js/modules/es.regexp.sticky.js\";\nimport \"core-js/modules/es.regexp.test.js\";\nimport \"core-js/modules/es.regexp.to-string.js\";\nimport \"core-js/modules/es.string.ends-with.js\";\nimport \"core-js/modules/es.string.includes.js\";\nimport \"core-js/modules/es.string.match.js\";\nimport \"core-js/modules/es.string.replace.js\";\nimport \"core-js/modules/es.string.starts-with.js\";\nimport \"core-js/modules/es.string.trim.js\";\nexport function handleCodeFormat(content, selection) {\n  return handleMultilineFormat(content, selection, '```', '\\n```');\n}\n// 增强的格式检测\nexport function detectFormats(text) {\n  if (!text || typeof text !== 'string') return {};\n\n  // 检测多行格式\n  var lines = text.split('\\n');\n  var isMultiline = lines.length > 1;\n  return {\n    bold: /^\\*\\*.+\\*\\*$/.test(text),\n    italic: /^_.+_$/.test(text),\n    strikethrough: /^~~.+~~$/.test(text),\n    h1: /^#\\s.+$/.test(text),\n    h2: /^##\\s.+$/.test(text),\n    h3: /^###\\s.+$/.test(text),\n    ul: lines.every(function (line) {\n      return /^\\s*[-*+]\\s.+$/.test(line);\n    }),\n    ol: lines.every(function (line) {\n      return /^\\s*\\d+\\.\\s.+$/.test(line);\n    }),\n    taskList: lines.every(function (line) {\n      return /^\\s*[-*+]\\s\\[[ xX]\\]\\s.+$/.test(line);\n    }),\n    code: /^`.+`$/.test(text),\n    codeblock: /^```[^\\n]*\\n[\\s\\S]*?\\n```$/.test(text),\n    quote: lines.every(function (line) {\n      return /^\\s*>/.test(line);\n    })\n  };\n}\n\n// 更严格的格式包裹检测\nfunction isWrappedWith(text, prefix) {\n  var suffix = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : prefix;\n  if (!text || !prefix) return false;\n  return text.startsWith(prefix) && text.endsWith(suffix) && text.length > prefix.length + suffix.length;\n}\n\n// 改进的格式切换\nexport function toggleMarkdownFormat(content, selection, prefix, suffix) {\n  var start = selection.start,\n    end = selection.end,\n    text = selection.text;\n\n  // 严格检测是否已应用格式\n  var isFormatted = isWrappedWith(text, prefix, suffix);\n  if (isFormatted) {\n    return removeMarkdownFormat(content, selection, prefix, suffix);\n  } else {\n    // 确保不会重复添加格式\n    if (text.startsWith(prefix) || text.endsWith(suffix)) {\n      return {\n        content: content,\n        newStart: start,\n        newEnd: end\n      };\n    }\n    return addMarkdownFormat(content, selection, prefix, suffix);\n  }\n}\n\n// 改进的格式添加\nexport function addMarkdownFormat(content, selection, prefix, suffix) {\n  var start = selection.start,\n    end = selection.end,\n    text = selection.text;\n\n  // 处理多行内容\n  if (text.includes('\\n')) {\n    var lines = text.split('\\n');\n    var formattedLines = lines.map(function (line) {\n      return prefix + line + suffix;\n    });\n    var newText = formattedLines.join('\\n');\n    return {\n      content: content.slice(0, start) + newText + content.slice(end),\n      newStart: start,\n      newEnd: start + newText.length\n    };\n  }\n  return {\n    content: content.slice(0, start) + prefix + text + suffix + content.slice(end),\n    newStart: start + prefix.length,\n    newEnd: end + prefix.length + suffix.length\n  };\n}\n\n// 改进的格式移除\nexport function removeMarkdownFormat(content, selection, prefix, suffix) {\n  var start = selection.start,\n    end = selection.end,\n    text = selection.text;\n\n  // 处理多行内容\n  if (text.includes('\\n')) {\n    var lines = text.split('\\n');\n    var unformattedLines = lines.map(function (line) {\n      var result = line;\n      if (line.startsWith(prefix)) result = result.slice(prefix.length);\n      if (suffix && line.endsWith(suffix)) {\n        result = result.slice(0, result.length - suffix.length);\n      }\n      return result;\n    });\n    var newText = unformattedLines.join('\\n');\n    return {\n      content: content.slice(0, start) + newText + content.slice(end),\n      newStart: start,\n      newEnd: start + newText.length\n    };\n  }\n  return {\n    content: content.slice(0, start) + text.slice(prefix.length, suffix ? -suffix.length : undefined) + content.slice(end),\n    newStart: start,\n    newEnd: end - prefix.length - (suffix ? suffix.length : 0)\n  };\n}\n\n// 改进的多行格式处理\nexport function handleMultilineFormat(content, selection, prefix) {\n  var suffix = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : '';\n  var start = selection.start,\n    end = selection.end,\n    text = selection.text;\n  var lines = text.split('\\n');\n\n  // 增强的格式检测\n  var isFormatted = lines.every(function (line) {\n    var trimmed = line.trim();\n    return (trimmed.startsWith(prefix) || line.startsWith(prefix)) && (suffix ? trimmed.endsWith(suffix) || line.endsWith(suffix) : true);\n  });\n  if (isFormatted) {\n    // 移除格式\n    var newLines = lines.map(function (line) {\n      var result = line;\n      // 处理前缀\n      if (line.trim().startsWith(prefix)) {\n        result = result.replace(prefix, '');\n      } else if (line.startsWith(prefix)) {\n        result = result.replace(new RegExp(\"^\".concat(escapeRegExp(prefix))), '');\n      }\n      // 处理后缀\n      if (suffix) {\n        if (line.trim().endsWith(suffix)) {\n          result = result.replace(new RegExp(\"\".concat(escapeRegExp(suffix), \"$\")), '');\n        } else if (line.endsWith(suffix)) {\n          result = result.replace(new RegExp(\"\".concat(escapeRegExp(suffix), \"$\")), '');\n        }\n      }\n      return result;\n    });\n    var newText = newLines.join('\\n');\n    return {\n      content: content.slice(0, start) + newText + content.slice(end),\n      newStart: start,\n      newEnd: start + newText.length\n    };\n  } else {\n    // 添加格式\n    var _newLines = lines.map(function (line) {\n      var indent = line.match(/^\\s*/)[0];\n      return indent + prefix + line.trim() + suffix;\n    });\n    var _newText = _newLines.join('\\n');\n    var lengthDiff = _newText.length - text.length;\n    return {\n      content: content.slice(0, start) + _newText + content.slice(end),\n      newStart: start,\n      newEnd: end + lengthDiff\n    };\n  }\n}\n\n// 辅助函数：转义正则特殊字符\nfunction escapeRegExp(string) {\n  return string.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&');\n}\n\n// 更新后的格式助手\nexport var formatHelpers = {\n  bold: function bold(content, selection) {\n    return toggleMarkdownFormat(content, selection, '**', '**');\n  },\n  italic: function italic(content, selection) {\n    return toggleMarkdownFormat(content, selection, '_', '_');\n  },\n  strikethrough: function strikethrough(content, selection) {\n    return toggleMarkdownFormat(content, selection, '~~', '~~');\n  },\n  h1: function h1(content, selection) {\n    return toggleMarkdownFormat(content, selection, '# ', '');\n  },\n  h2: function h2(content, selection) {\n    return toggleMarkdownFormat(content, selection, '## ', '');\n  },\n  h3: function h3(content, selection) {\n    return toggleMarkdownFormat(content, selection, '### ', '');\n  },\n  ul: function ul(content, selection) {\n    return handleMultilineFormat(content, selection, '- ');\n  },\n  ol: function ol(content, selection) {\n    return handleMultilineFormat(content, selection, '1. ');\n  },\n  taskList: function taskList(content, selection) {\n    return handleMultilineFormat(content, selection, '- [ ] ');\n  },\n  quote: function quote(content, selection) {\n    return handleMultilineFormat(content, selection, '> ');\n  },\n  code: function code(content, selection) {\n    return toggleMarkdownFormat(content, selection, '`', '`');\n  },\n  codeblock: function codeblock(content, selection) {\n    return handleMultilineFormat(content, selection, '```\\n', '\\n```');\n  },\n  table: function table(content, selection) {\n    var tableTemplate = '| Header 1 | Header 2 |\\n|----------|----------|\\n| Cell 1   | Cell 2   |';\n    return {\n      content: content.slice(0, selection.start) + tableTemplate + content.slice(selection.end),\n      newStart: selection.start + tableTemplate.length,\n      newEnd: selection.start + tableTemplate.length\n    };\n  },\n  image: function image(content, selection, imagePath) {\n    var markdownImage = \"![\\u56FE\\u7247](\".concat(imagePath, \")\");\n    return {\n      content: content.slice(0, selection.start) + markdownImage + content.slice(selection.end),\n      newStart: selection.start + markdownImage.length,\n      newEnd: selection.start + markdownImage.length\n    };\n  },\n  link: function link(content, selection, linkText, url) {\n    if (selection.text.includes('![图片]')) return {\n      content: content,\n      newStart: selection.start\n    };\n    var markdownLink = \"[\".concat(linkText, \"](\").concat(url, \")\");\n    return {\n      content: content.slice(0, selection.start) + markdownLink + content.slice(selection.end),\n      newStart: selection.start + markdownLink.length,\n      newEnd: selection.start + markdownLink.length\n    };\n  }\n};","map":{"version":3,"names":["handleCodeFormat","content","selection","handleMultilineFormat","detectFormats","text","lines","split","isMultiline","length","bold","test","italic","strikethrough","h1","h2","h3","ul","every","line","ol","taskList","code","codeblock","quote","isWrappedWith","prefix","suffix","arguments","undefined","startsWith","endsWith","toggleMarkdownFormat","start","end","isFormatted","removeMarkdownFormat","newStart","newEnd","addMarkdownFormat","includes","formattedLines","map","newText","join","slice","unformattedLines","result","trimmed","trim","newLines","replace","RegExp","concat","escapeRegExp","indent","match","lengthDiff","string","formatHelpers","table","tableTemplate","image","imagePath","markdownImage","link","linkText","url","markdownLink"],"sources":["D:/作业/markdown-editor优化版/src/lib/formatUtils.js"],"sourcesContent":["export function handleCodeFormat(content, selection) {\n  return handleMultilineFormat(content, selection, '```', '\\n```')\n}\r\n// 增强的格式检测\nexport function detectFormats(text) {\n  if (!text || typeof text !== 'string') return {}\n  \n  // 检测多行格式\n  const lines = text.split('\\n')\n  const isMultiline = lines.length > 1\n  \n  return {\n    bold: /^\\*\\*.+\\*\\*$/.test(text),\n    italic: /^_.+_$/.test(text),\n    strikethrough: /^~~.+~~$/.test(text),\n    h1: /^#\\s.+$/.test(text),\n    h2: /^##\\s.+$/.test(text),\n    h3: /^###\\s.+$/.test(text),\n    ul: lines.every(line => /^\\s*[-*+]\\s.+$/.test(line)),\n    ol: lines.every(line => /^\\s*\\d+\\.\\s.+$/.test(line)),\n    taskList: lines.every(line => /^\\s*[-*+]\\s\\[[ xX]\\]\\s.+$/.test(line)),\n    code: /^`.+`$/.test(text),\n    codeblock: /^```[^\\n]*\\n[\\s\\S]*?\\n```$/.test(text),\n    quote: lines.every(line => /^\\s*>/.test(line))\n  }\n}\n\n// 更严格的格式包裹检测\nfunction isWrappedWith(text, prefix, suffix = prefix) {\n  if (!text || !prefix) return false\n  return (\n    text.startsWith(prefix) && \n    text.endsWith(suffix) &&\n    text.length > prefix.length + suffix.length\n  )\n}\n\n// 改进的格式切换\nexport function toggleMarkdownFormat(content, selection, prefix, suffix) {\n  const { start, end, text } = selection\n  \n  // 严格检测是否已应用格式\n  const isFormatted = isWrappedWith(text, prefix, suffix)\n  \n  if (isFormatted) {\n    return removeMarkdownFormat(content, selection, prefix, suffix)\n  } else {\n    // 确保不会重复添加格式\n    if (text.startsWith(prefix) || text.endsWith(suffix)) {\n      return { content, newStart: start, newEnd: end }\n    }\n    return addMarkdownFormat(content, selection, prefix, suffix)\n  }\n}\n\n// 改进的格式添加\nexport function addMarkdownFormat(content, selection, prefix, suffix) {\n  const { start, end, text } = selection\n  \n  // 处理多行内容\n  if (text.includes('\\n')) {\n    const lines = text.split('\\n')\n    const formattedLines = lines.map(line => prefix + line + suffix)\n    const newText = formattedLines.join('\\n')\n    \n    return {\n      content: content.slice(0, start) + newText + content.slice(end),\n      newStart: start,\n      newEnd: start + newText.length\n    }\n  }\n  \n  return {\n    content: content.slice(0, start) + prefix + text + suffix + content.slice(end),\n    newStart: start + prefix.length,\n    newEnd: end + prefix.length + suffix.length\n  }\n}\n\n// 改进的格式移除\nexport function removeMarkdownFormat(content, selection, prefix, suffix) {\n  const { start, end, text } = selection\n  \n  // 处理多行内容\n  if (text.includes('\\n')) {\n    const lines = text.split('\\n')\n    const unformattedLines = lines.map(line => {\n      let result = line\n      if (line.startsWith(prefix)) result = result.slice(prefix.length)\n      if (suffix && line.endsWith(suffix)) {\n        result = result.slice(0, result.length - suffix.length)\n      }\n      return result\n    })\n    \n    const newText = unformattedLines.join('\\n')\n    return {\n      content: content.slice(0, start) + newText + content.slice(end),\n      newStart: start,\n      newEnd: start + newText.length\n    }\n  }\n  \n  return {\n    content: content.slice(0, start) + \n             text.slice(prefix.length, suffix ? -suffix.length : undefined) + \n             content.slice(end),\n    newStart: start,\n    newEnd: end - prefix.length - (suffix ? suffix.length : 0)\n  }\n}\n\n// 改进的多行格式处理\nexport function handleMultilineFormat(content, selection, prefix, suffix = '') {\n  const { start, end, text } = selection\n  const lines = text.split('\\n')\n\n  // 增强的格式检测\n  const isFormatted = lines.every(line => {\n    const trimmed = line.trim()\n    return (\n      (trimmed.startsWith(prefix) || line.startsWith(prefix)) && \n      (suffix ? trimmed.endsWith(suffix) || line.endsWith(suffix) : true)\n    )\n  })\n\n  if (isFormatted) {\n    // 移除格式\n    const newLines = lines.map(line => {\n      let result = line\n      // 处理前缀\n      if (line.trim().startsWith(prefix)) {\n        result = result.replace(prefix, '')\n      } else if (line.startsWith(prefix)) {\n        result = result.replace(new RegExp(`^${escapeRegExp(prefix)}`), '')\n      }\n      // 处理后缀\n      if (suffix) {\n        if (line.trim().endsWith(suffix)) {\n          result = result.replace(new RegExp(`${escapeRegExp(suffix)}$`), '')\n        } else if (line.endsWith(suffix)) {\n          result = result.replace(new RegExp(`${escapeRegExp(suffix)}$`), '')\n        }\n      }\n      return result\n    })\n    \n    const newText = newLines.join('\\n')\n    return {\n      content: content.slice(0, start) + newText + content.slice(end),\n      newStart: start,\n      newEnd: start + newText.length\n    }\n  } else {\n    // 添加格式\n    const newLines = lines.map(line => {\n      const indent = line.match(/^\\s*/)[0]\n      return indent + prefix + line.trim() + suffix\n    })\n    \n    const newText = newLines.join('\\n')\n    const lengthDiff = newText.length - text.length\n    return {\n      content: content.slice(0, start) + newText + content.slice(end),\n      newStart: start,\n      newEnd: end + lengthDiff\n    }\n  }\n}\n\n// 辅助函数：转义正则特殊字符\nfunction escapeRegExp(string) {\n  return string.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&')\n}\n\n// 更新后的格式助手\nexport const formatHelpers = {\n  bold: (content, selection) => toggleMarkdownFormat(content, selection, '**', '**'),\n  italic: (content, selection) => toggleMarkdownFormat(content, selection, '_', '_'),\n  strikethrough: (content, selection) => toggleMarkdownFormat(content, selection, '~~', '~~'),\n  h1: (content, selection) => toggleMarkdownFormat(content, selection, '# ', ''),\n  h2: (content, selection) => toggleMarkdownFormat(content, selection, '## ', ''),\n  h3: (content, selection) => toggleMarkdownFormat(content, selection, '### ', ''),\n  ul: (content, selection) => handleMultilineFormat(content, selection, '- '),\n  ol: (content, selection) => handleMultilineFormat(content, selection, '1. '),\n  taskList: (content, selection) => handleMultilineFormat(content, selection, '- [ ] '),\n  quote: (content, selection) => handleMultilineFormat(content, selection, '> '),\n  code: (content, selection) => toggleMarkdownFormat(content, selection, '`', '`'),\n  codeblock: (content, selection) => handleMultilineFormat(content, selection, '```\\n', '\\n```'),\n  table: (content, selection) => {\n    const tableTemplate = '| Header 1 | Header 2 |\\n|----------|----------|\\n| Cell 1   | Cell 2   |'\n    return {\n      content: content.slice(0, selection.start) + tableTemplate + content.slice(selection.end),\n      newStart: selection.start + tableTemplate.length,\n      newEnd: selection.start + tableTemplate.length\n    }\n  },\n  image: (content, selection, imagePath) => {\n    const markdownImage = `![图片](${imagePath})`\n    return {\n      content: content.slice(0, selection.start) + markdownImage + content.slice(selection.end),\n      newStart: selection.start + markdownImage.length,\n      newEnd: selection.start + markdownImage.length\n    }\n  },\n  link: (content, selection, linkText, url) => {\n    if (selection.text.includes('![图片]')) return { content, newStart: selection.start }\n    const markdownLink = `[${linkText}](${url})`\n    return {\n      content: content.slice(0, selection.start) + markdownLink + content.slice(selection.end),\n      newStart: selection.start + markdownLink.length,\n      newEnd: selection.start + markdownLink.length\n    }\n  }\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}